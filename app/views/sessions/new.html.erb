<% content_for :header_title, "Acesso Restrito" %>
<% content_for :header_desc, "Ãrea exclusiva para membros autorizados da empresa." %>

<article class="card" style="max-width: 450px; margin: 0 auto;">
  <div class="card__header">
    <h2 class="card__title">Identifique-se</h2>
  </div>

  <% if flash[:alert] %>
    <div class="report-form__feedback" style="margin-bottom: 1rem;">
      <%= flash[:alert] %>
    </div>
  <% end %>

  <%= form_with url: session_path, class: "report-form" do |form| %>
    <div class="form-field">
      <%= form.label :email_address, "E-mail Corporativo" %>
      <%= form.email_field :email_address, 
          required: true, 
          autofocus: true, 
          autocomplete: "username", 
          placeholder: "exemplo@empresa.com", 
          value: params[:email_address],
          class: "form-input" %>
    </div>

    <div class="form-field" data-controller="sessions">
      <%= form.label :password, "Senha" %>
      <div style="position: relative; display: flex; align-items: center;">
        <%= form.password_field :password, 
            required: true, 
            autocomplete: "current-password", 
            maxlength: 72,
            class: "form-input",
            style: "padding-right: 40px;",
            data: { sessions_target: "password" } %>
        
        <button type="button" 
                data-action="click->sessions#toggle"
                style="position: absolute; right: 12px; background: none; border: none; cursor: pointer; color: #6c757d; padding: 0; display: flex; align-items: center;">
          
          <%# Icon 1: Eye Open (Visible by default) %>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-sessions-target="eyeOpen">
            <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
            <circle cx="12" cy="12" r="3"></circle>
          </svg>

          <%# Icon 2: Eye Closed (Hidden by default) %>
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" data-sessions-target="eyeClose" style="display: none;">
            <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"></path>
            <line x1="1" y1="1" x2="23" y2="23"></line>
          </svg>
        </button>
      </div>
    </div>

    <div class="report-form__footer" style="flex-direction: column; gap: 1rem;">
      <%= form.submit "Entrar no Sistema", class: "button button--primary", style: "width: 100%;" %>
    </div>
  <% end %>
</article>